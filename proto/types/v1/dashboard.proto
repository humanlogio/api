syntax = "proto3";

package types.v1;

import "google/protobuf/timestamp.proto";

option go_package = "types/v1;typesv1";

message Dashboard {
  DashboardMeta meta = 1;
  DashboardSpec spec = 2;
  DashboardStatus status = 3;
}

message DashboardMeta {
  string id = 1;
}

message DashboardSpec {
  string name = 1;
  string description = 2;
  bool is_readonly = 3;
  bytes perses_json = 5;
}

message DashboardStatus {
  google.protobuf.Timestamp created_at = 1;
  google.protobuf.Timestamp updated_at = 2;
  repeated string errors = 3;

  oneof origin {
    ManagedDashboard managed = 4;
    GeneratedDashboard generated = 5;
    BuiltinDashboard builtin = 6;
    RemoteDashboard remote = 7;
  }

  message ManagedDashboard {
    string path = 1;
  }

  message GeneratedDashboard {
    string path = 1;
    string detection_reason = 2;
  }

  message BuiltinDashboard {
    string id = 1;
  }

  message RemoteDashboard {
    string repository_url = 1;
    string path = 2;
    string ref = 3;
  }
}
